<!doctype html><html><head><meta charset='utf-8'><title>Solicitud</title><link rel='stylesheet' href='public/styles.css'></head><body>
<div class='container'><aside class='sidebar'><div class='brand'><img src='public/assets/logo.svg' class='logo'><h1>Biblioconecta</h1></div></aside>
<main class='main'><h2>Formulario de solicitud</h2>
<form id='reqForm' class='card' style='max-width:720px'>
<label class='field'>Nombre<input name='nombre' required></label>
<label class='field'>Apellido<input name='apellido'></label>
<label class='field'>RUT<input name='rut' required></label>
<label class='field'>Celular<input name='celular' required></label>
<label class='field'>Direcci√≥n<input name='direccion'></label>
<label class='field'>Foto ID (URL)<input name='fotoId'></label>
<input type='hidden' name='libroId' id='libroId'>
<div style='display:flex;gap:12px;margin-top:12px'><button class='btn' type='submit'>Enviar solicitud</button><button class='btn ghost' type='button' onclick='history.back()'>Cancelar</button></div>
</form></main></div>
<script>
const params = new URLSearchParams(location.search); document.getElementById('libroId').value = params.get('libro') || '';
document.getElementById('reqForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const body = Object.fromEntries(new FormData(e.target).entries());
  const r = await fetch('/api/requests',{method:'POST',headers:{'Content-Type':'application/json'},body: JSON.stringify(body)});
  const j = await r.json();
  if(j.ok){ alert('Solicitud enviada'); location.href='/catalogo.html' } else alert('Error');
});
</script></body></html>
